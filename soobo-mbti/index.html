<!DOCTYPE html>
<html lang="ko">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>ìˆ˜ë©´ MBTI</title>
    <link rel="stylesheet" href="style.css">
</head>
<body data-kakao-app-key="93298b5c87e46c48f2ba181afb1d27fd" data-api-base="https://soobo.sijun.dev/api">
    <div class="mobile-container">
        <div class="hero-image">
            <img src="images/kitten.gif" alt="êµ¿ë‚˜ì‡ MBTI" class="square-image">
        </div>
        <h1>êµ¿ë‚˜ì‡ MBTI</h1>
        <p>
            ì ì— ë“¤ ë•Œê¹Œì§€ ë‚˜ì˜ ì„±í–¥ì€ ì–´ë–¨ê¹Œ?<br>1ë¶„ë§Œì— ê²€ì‚¬í•˜ê³  ê¿€ì  íŒê¹Œì§€ í™•ì¸í•˜ê¸°! 
        </p>

        <div>
            <button id="start-btn" onclick="startTest()">í…ŒìŠ¤íŠ¸í•˜ê¸°</button>
            <button id="share-btn">ê³µìœ í•˜ê¸°</button>
        </div>
    </div>

    <div id="share-overlay" class="modal-overlay" hidden></div>
    <div id="share-sheet" class="bottom-sheet" aria-hidden="true">
        <div class="sheet-handle"></div>
        <div class="sheet-title">ê³µìœ í•˜ê¸°</div>
        <div class="share-grid">
            <button class="share-item" data-share="kakao">ì¹´ì¹´ì˜¤í†¡</button>
            <button class="share-item" data-share="instagram">ì¸ìŠ¤íƒ€ê·¸ë¨</button>
            <button class="share-item" data-share="copy">ë§í¬ ë³µì‚¬</button>
        </div>
        <button id="share-cancel" class="sheet-cancel">ì·¨ì†Œ</button>
    </div>
    <!-- Cloudflare Web Analytics --><script defer src='https://static.cloudflareinsights.com/beacon.min.js' data-cf-beacon='{"token": "bbdc24e65dc44437831a11f813a10244"}'></script><!-- End Cloudflare Web Analytics -->
</body>
</html>

<script src="./api.js"></script>
<script>
    async function startTest() {
        const startBtn = document.getElementById('start-btn');
        startBtn.disabled = true;
        startBtn.textContent = 'ì„¸ì…˜ ìƒì„± ì¤‘...';
        try {
            const { sessionId } = await ApiClient.startSession();
            const params = new URLSearchParams({ sessionId });
            window.location.href = `question.html?${params.toString()}`;
        } catch (e) {
            alert('ì„¸ì…˜ ìƒì„±ì— ì‹¤íŒ¨í–ˆìŠµë‹ˆë‹¤. ì ì‹œ í›„ ë‹¤ì‹œ ì‹œë„í•´ì£¼ì„¸ìš”.');
            startBtn.disabled = false;
            startBtn.textContent = 'í…ŒìŠ¤íŠ¸í•˜ê¸°';
        }
    }
    
    // API ë² ì´ìŠ¤ URL ìë™ ê°ì§€ë¨. í˜„ì¬ ì„¤ì • í™•ì¸:
    console.log('ğŸŒ API Base URL:', ApiClient.API_BASE);
    console.log('ğŸ  Current Host:', window.location.hostname);
    console.log('ğŸ”’ Protocol:', window.location.protocol);
    
    // ìˆ˜ë™ ì„¤ì •ì´ í•„ìš”í•œ ê²½ìš° bodyì— data-api-base ì†ì„± ì¶”ê°€:
    // <body data-api-base="https://your-custom-api.example.com/api">
</script>

<script src="./share.js"></script>